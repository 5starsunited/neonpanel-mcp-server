{
  "name": "supply_chain_list_fba_replenishment_candidates",
  "description": "List items needing FBA replenishment based on projected stockout risk and inbound coverage.\n\nThis is the preferred (refactored) version of amazon_supply_chain_fba_list_replenish_asap.\n\nInput uses the Option-1 query envelope:\n- query: shared filters/limit/sort/projection\n- tool_specific: the legacy parameters preserved for backward compatibility\n\nImportant (company selection):\n- Use query.filters.company_id (preferred) or tool_specific.company_id.\n- Do NOT pass a freeform company name in query.filters.company (e.g., \"5 stars united\"). This tool will return an error asking you to use company_id.\n- If you only have the company name, first call neonpanel_listCompanies, identify the exact company (e.g., \"5 Stars United LLC\"), then use its numeric id as company_id.\n\nNotes:\n- Tools may ignore unsupported query keys but should return meta.warnings when they do\n\nKnowledge base: https://help.neonpanel.com/en/articles/60\nInventory Planning report (UI): https://my.neonpanel.com/app/reports/forecasting/inventory-planning",
  "isConsequential": false,
  "inputSchema": {
    "type": "object",
    "properties": {
      "query": {
        "type": "object",
        "description": "Shared query envelope for list/portfolio tools. Tools may ignore unsupported fields but should return meta.warnings when they do.",
        "properties": {
          "filters": {
            "type": "object",
            "description": "Standard filters. Tools should support a meaningful subset and warn on unsupported keys.",
            "properties": {
              "company": {
                "type": "string",
                "description": "Deprecated alias for company_id. Only numeric strings are accepted (treated as company_id). Do not pass company names; use neonpanel_listCompanies to find the company id and pass company_id instead."
              },
              "company_id": {
                "type": "integer",
                "minimum": 1,
                "description": "Numeric company identifier. Optional alias for company."
              },
              "brand": { "type": "array", "items": { "type": "string" } },
              "marketplace": { "type": "array", "items": { "type": "string" } },
              "currency": { "type": "array", "items": { "type": "string" } },
              "product_family": { "type": "array", "items": { "type": "string" } },
              "parent_asin": { "type": "array", "items": { "type": "string" } },
              "asin": { "type": "array", "items": { "type": "string" } },
              "sku": { "type": "array", "items": { "type": "string" } },
              "revenue_abcd_class": {
                "type": "array",
                "items": { "type": "string", "enum": ["A", "B", "C", "D"] }
              },
              "pareto_abc_class": {
                "type": "array",
                "items": { "type": "string", "enum": ["A", "B", "C"] }
              },
              "tags": {
                "type": "array",
                "items": { "type": "string" },
                "description": "Filter-only tags. Multi-agent safe. Agents must not infer meaning."
              }
            },
            "additionalProperties": true
          },
          "aggregation": {
            "type": "object",
            "description": "Optional aggregation. If group_by is used, tool may return aggregated rows rather than SKU-level rows.",
            "properties": {
              "group_by": {
                "type": "array",
                "items": { "type": "string" },
                "default": ["none"],
                "description": "Hierarchical grouping. Order matters. Example: [\"brand\",\"product_family\",\"parent_asin\"]."
              },
              "time": {
                "type": "object",
                "description": "Optional time bucketing (if historical snapshots exist). Tools should warn if periodicity is requested but not supported.",
                "properties": {
                  "periodicity": {
                    "type": "string",
                    "enum": ["day", "week", "month", "quarter", "year"]
                  },
                  "start_date": { "type": "string", "format": "date" },
                  "end_date": { "type": "string", "format": "date" }
                },
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          },
          "sort": {
            "type": "object",
            "description": "Sort by any returned output field/KPI. Tool should return meta.applied_sort and warn if field is unknown.",
            "properties": {
              "field": { "type": "string" },
              "direction": { "type": "string", "enum": ["asc", "desc"], "default": "desc" },
              "nulls": { "type": "string", "enum": ["first", "last"], "default": "last" }
            },
            "additionalProperties": false
          },
          "select_fields": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Optional output field selection (projection). If omitted, tool returns defaults."
          },
          "limit": {
            "type": "integer",
            "minimum": 1,
            "default": 50,
            "description": "Max number of rows to return."
          },
          "cursor": {
            "type": "string",
            "description": "Opaque cursor for pagination (if supported)."
          }
        },
        "additionalProperties": false
      },
      "tool_specific": {
        "type": "object",
        "description": "Original parameters preserved under tool_specific.",
        "properties": {
          "planning_base": {
            "type": "string",
            "enum": ["all", "targeted_only", "actively_sold_only", "planned_only"],
            "default": "actively_sold_only"
          },
          "target_skus": { "type": "array", "items": { "type": "string" } },
          "target_inventory_ids": { "type": "array", "items": { "type": "integer" } },
          "target_asins": { "type": "array", "items": { "type": "string" } },
          "brand": { "type": "array", "items": { "type": "string" } },
          "category": { "type": "array", "items": { "type": "string" } },
          "marketplaces": { "type": "array", "items": { "type": "string" }, "default": ["ALL"] },
          "countries": { "type": "array", "items": { "type": "string" } },
          "company_id": { "type": "integer", "minimum": 1 },
          "time_window": {
            "type": "object",
            "properties": {
              "lookahead_days": { "type": "integer", "minimum": 1, "default": 14 },
              "as_of_date": { "type": "string", "format": "date" }
            }
          },
          "sales_velocity": { "type": "string", "enum": ["current", "target", "planned"], "default": "current" },
          "use_seasonality": { "type": "boolean", "default": true },
          "override_default": { "type": "boolean", "default": false },
          "fba_lead_time_days_override": { "type": "integer", "minimum": 0, "default": 12 },
          "fba_safety_stock_days_override": { "type": "integer", "minimum": 0, "default": 60 },
          "days_between_shipments": { "type": "integer", "minimum": 0, "default": 14 },
          "stockout_threshold_days": { "type": "integer", "minimum": 0, "default": 7 },
          "active_sold_min_units_per_day": { "type": "number", "minimum": 0, "default": 1 }
        },
        "additionalProperties": false
      }
    },
    "required": ["query"],
    "additionalProperties": false
  },
  "outputSchema": {
    "type": "object",
    "properties": {
      "items": { "type": "array", "items": { "type": "object", "additionalProperties": true } },
      "meta": {
        "type": "object",
        "properties": {
          "applied_sort": { "type": "object", "additionalProperties": true },
          "selected_fields": { "type": "array", "items": { "type": "string" } },
          "included_fields": { "type": "array", "items": { "type": "string" } },
          "warnings": { "type": "array", "items": { "type": "string" } }
        },
        "additionalProperties": true
      }
    },
    "required": ["items"]
  }
}
