"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const types_1 = require("../src/types");
describe('Types and Enums', () => {
    describe('KeepaDomain', () => {
        it('should have correct domain values', () => {
            expect(types_1.KeepaDomain.US).toBe(1);
            expect(types_1.KeepaDomain.UK).toBe(2);
            expect(types_1.KeepaDomain.DE).toBe(3);
            expect(types_1.KeepaDomain.FR).toBe(4);
            expect(types_1.KeepaDomain.JP).toBe(5);
            expect(types_1.KeepaDomain.CA).toBe(6);
            expect(types_1.KeepaDomain.CN).toBe(7);
            expect(types_1.KeepaDomain.IT).toBe(8);
            expect(types_1.KeepaDomain.ES).toBe(9);
            expect(types_1.KeepaDomain.IN).toBe(10);
            expect(types_1.KeepaDomain.MX).toBe(11);
        });
    });
    describe('KeepaDataType', () => {
        it('should have COUNT_NEW at correct index', () => {
            // This is critical for our seller count functionality
            expect(types_1.KeepaDataType.COUNT_NEW).toBe(11);
        });
        it('should have other important data types', () => {
            expect(types_1.KeepaDataType.AMAZON).toBe(0);
            expect(types_1.KeepaDataType.NEW).toBe(1);
            expect(types_1.KeepaDataType.USED).toBe(2);
            expect(types_1.KeepaDataType.SALES_RANK).toBe(3);
            expect(types_1.KeepaDataType.RATING).toBe(16);
        });
    });
    describe('VERIFIED_AMAZON_CATEGORIES', () => {
        it('should contain verified categories', () => {
            expect(types_1.VERIFIED_AMAZON_CATEGORIES['Electronics']).toBe(172282);
            expect(types_1.VERIFIED_AMAZON_CATEGORIES['Books']).toBe(283155);
            expect(types_1.VERIFIED_AMAZON_CATEGORIES['Clothing, Shoes & Jewelry']).toBe(7141123011);
        });
        it('should have Industrial & Scientific category used in tests', () => {
            expect(types_1.VERIFIED_AMAZON_CATEGORIES['Industrial & Scientific']).toBe(16310091);
        });
        it('should not contain undefined categories', () => {
            expect(Object.values(types_1.VERIFIED_AMAZON_CATEGORIES)).not.toContain(undefined);
            expect(Object.values(types_1.VERIFIED_AMAZON_CATEGORIES)).not.toContain(null);
        });
        it('should have all category IDs as numbers', () => {
            Object.values(types_1.VERIFIED_AMAZON_CATEGORIES).forEach(categoryId => {
                expect(typeof categoryId).toBe('number');
                expect(categoryId).toBeGreaterThan(0);
            });
        });
    });
    describe('getCategoryName', () => {
        it('should return correct category name for valid ID', () => {
            expect((0, types_1.getCategoryName)(172282)).toBe('Electronics');
            expect((0, types_1.getCategoryName)(283155)).toBe('Books');
            expect((0, types_1.getCategoryName)(16310091)).toBe('Industrial & Scientific');
        });
        it('should return undefined for invalid category ID', () => {
            expect((0, types_1.getCategoryName)(999999999)).toBeUndefined();
            expect((0, types_1.getCategoryName)(-1)).toBeUndefined();
            expect((0, types_1.getCategoryName)(0)).toBeUndefined();
        });
        it('should handle edge cases', () => {
            expect((0, types_1.getCategoryName)(null)).toBeUndefined();
            expect((0, types_1.getCategoryName)(undefined)).toBeUndefined();
            expect((0, types_1.getCategoryName)('string')).toBeUndefined();
        });
    });
    describe('Category Validation', () => {
        it('should have consistent category mappings', () => {
            // Test that forward and reverse lookups are consistent
            Object.entries(types_1.VERIFIED_AMAZON_CATEGORIES).forEach(([name, id]) => {
                expect((0, types_1.getCategoryName)(id)).toBe(name);
            });
        });
        it('should not have duplicate category IDs', () => {
            const categoryIds = Object.values(types_1.VERIFIED_AMAZON_CATEGORIES);
            const uniqueIds = new Set(categoryIds);
            expect(uniqueIds.size).toBe(categoryIds.length);
        });
        it('should have reasonable category ID ranges', () => {
            // Amazon category IDs should be positive integers
            Object.values(types_1.VERIFIED_AMAZON_CATEGORIES).forEach(categoryId => {
                expect(Number.isInteger(categoryId)).toBe(true);
                expect(categoryId).toBeGreaterThan(0);
                expect(categoryId).toBeLessThan(99999999999); // Reasonable upper bound
            });
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHlwZXMudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInR5cGVzLnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSx3Q0FLc0I7QUFFdEIsUUFBUSxDQUFDLGlCQUFpQixFQUFFLEdBQUcsRUFBRTtJQUMvQixRQUFRLENBQUMsYUFBYSxFQUFFLEdBQUcsRUFBRTtRQUMzQixFQUFFLENBQUMsbUNBQW1DLEVBQUUsR0FBRyxFQUFFO1lBQzNDLE1BQU0sQ0FBQyxtQkFBVyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUMvQixNQUFNLENBQUMsbUJBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDL0IsTUFBTSxDQUFDLG1CQUFXLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQy9CLE1BQU0sQ0FBQyxtQkFBVyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUMvQixNQUFNLENBQUMsbUJBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDL0IsTUFBTSxDQUFDLG1CQUFXLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQy9CLE1BQU0sQ0FBQyxtQkFBVyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUMvQixNQUFNLENBQUMsbUJBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDL0IsTUFBTSxDQUFDLG1CQUFXLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQy9CLE1BQU0sQ0FBQyxtQkFBVyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztZ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SSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUU7Z0JBQ2hFLE1BQU0sQ0FBQyxJQUFBLHVCQUFlLEVBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDekMsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyx3Q0FBd0MsRUFBRSxHQUFHLEVBQUU7WUFDaEQsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxrQ0FBMEIsQ0FBQyxDQUFDO1lBQzlELE1BQU0sU0FBUyxHQUFHLElBQUksR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBRXZDLE1BQU0sQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNsRCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQywyQ0FBMkMsRUFBRSxHQUFHLEVBQUU7WUFDbkQsa0RBQWtEO1lBQ2xELE1BQU0sQ0FBQyxNQUFNLENBQUMsa0NBQTBCLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLEVBQUU7Z0JBQzdELE1BQU0sQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNoRCxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUN0QyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMseUJBQXlCO1lBQ3pFLENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgXG4gIEtlZXBhRG9tYWluLCBcbiAgS2VlcGFEYXRhVHlwZSwgXG4gIGdldENhdGVnb3J5TmFtZSwgXG4gIFZFUklGSUVEX0FNQVpPTl9DQVRFR09SSUVTIFxufSBmcm9tICcuLi9zcmMvdHlwZXMnO1xuXG5kZXNjcmliZSgnVHlwZXMgYW5kIEVudW1zJywgKCkgPT4ge1xuICBkZXNjcmliZSgnS2VlcGFEb21haW4nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYXZlIGNvcnJlY3QgZG9tYWluIHZhbHVlcycsICgpID0+IHtcbiAgICAgIGV4cGVjdChLZWVwYURvbWFpbi5VUykudG9CZSgxKTtcbiAgICAgIGV4cGVjdChLZWVwYURvbWFpbi5VSykudG9CZSgyKTtcbiAgICAgIGV4cGVjdChLZWVwYURvbWFpbi5ERSkudG9CZSgzKTtcbiAgICAgIGV4cGVjdChLZWVwYURvbWFpbi5GUikudG9CZSg0KTtcbiAgICAgIGV4cGVjdChLZWVwYURvbWFpbi5KUCkudG9CZSg1KTtcbiAgICAgIGV4cGVjdChLZWVwYURvbWFpbi5DQSkudG9CZSg2KTtcbiAgICAgIGV4cGVjdChLZWVwYURvbWFpbi5DTikudG9CZSg3KTtcbiAgICAgIGV4cGVjdChLZWVwYURvbWFpbi5JVCkudG9CZSg4KTtcbiAgICAgIGV4cGVjdChLZWVwYURvbWFpbi5FUykudG9CZSg5KTtcbiAgICAgIGV4cGVjdChLZWVwYURvbWFpbi5JTikudG9CZSgxMCk7XG4gICAgICBleHBlY3QoS2VlcGFEb21haW4uTVgpLnRvQmUoMTEpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnS2VlcGFEYXRhVHlwZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhdmUgQ09VTlRfTkVXIGF0IGNvcnJlY3QgaW5kZXgnLCAoKSA9PiB7XG4gICAgICAvLyBUaGlzIGlzIGNyaXRpY2FsIGZvciBvdXIgc2VsbGVyIGNvdW50IGZ1bmN0aW9uYWxpdHlcbiAgICAgIGV4cGVjdChLZWVwYURhdGFUeXBlLkNPVU5UX05FVykudG9CZSgxMSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgb3RoZXIgaW1wb3J0YW50IGRhdGEgdHlwZXMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoS2VlcGFEYXRhVHlwZS5BTUFaT04pLnRvQmUoMCk7XG4gICAgICBleHBlY3QoS2VlcGFEYXRhVHlwZS5ORVcpLnRvQmUoMSk7XG4gICAgICBleHBlY3QoS2VlcGFEYXRhVHlwZS5VU0VEKS50b0JlKDIpO1xuICAgICAgZXhwZWN0KEtlZXBhRGF0YVR5cGUuU0FMRVNfUkFOSykudG9CZSgzKTtcbiAgICAgIGV4cGVjdChLZWVwYURhdGFUeXBlLlJBVElORykudG9CZSgxNik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdWRVJJRklFRF9BTUFaT05fQ0FURUdPUklFUycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNvbnRhaW4gdmVyaWZpZWQgY2F0ZWdvcmllcycsICgpID0+IHtcbiAgICAgIGV4cGVjdChWRVJJRklFRF9BTUFaT05fQ0FURUdPUklFU1snRWxlY3Ryb25pY3MnXSkudG9CZSgxNzIyODIpO1xuICAgICAgZXhwZWN0KFZFUklGSUVEX0FNQVpPTl9DQVRFR09SSUVTWydCb29rcyddKS50b0JlKDI4MzE1NSk7XG4gICAgICBleHBlY3QoVkVSSUZJRURfQU1BWk9OX0NBVEVHT1JJRVNbJ0Nsb3RoaW5nLCBTaG9lcyAmIEpld2VscnknXSkudG9CZSg3MTQxMTIzMDExKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGF2ZSBJbmR1c3RyaWFsICYgU2NpZW50aWZpYyBjYXRlZ29yeSB1c2VkIGluIHRlc3RzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KFZFUklGSUVEX0FNQVpPTl9DQVRFR09SSUVTWydJbmR1c3RyaWFsICYgU2NpZW50aWZpYyddKS50b0JlKDE2MzEwMDkxKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IGNvbnRhaW4gdW5kZWZpbmVkIGNhdGVnb3JpZXMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoT2JqZWN0LnZhbHVlcyhWRVJJRklFRF9BTUFaT05fQ0FURUdPUklFUykpLm5vdC50b0NvbnRhaW4odW5kZWZpbmVkKTtcbiAgICAgIGV4cGVjdChPYmplY3QudmFsdWVzKFZFUklGSUVEX0FNQVpPTl9DQVRFR09SSUVTKSkubm90LnRvQ29udGFpbihudWxsKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGF2ZSBhbGwgY2F0ZWdvcnkgSURzIGFzIG51bWJlcnMnLCAoKSA9PiB7XG4gICAgICBPYmplY3QudmFsdWVzKFZFUklGSUVEX0FNQVpPTl9DQVRFR09SSUVTKS5mb3JFYWNoKGNhdGVnb3J5SWQgPT4ge1xuICAgICAgICBleHBlY3QodHlwZW9mIGNhdGVnb3J5SWQpLnRvQmUoJ251bWJlcicpO1xuICAgICAgICBleHBlY3QoY2F0ZWdvcnlJZCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXRDYXRlZ29yeU5hbWUnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gY29ycmVjdCBjYXRlZ29yeSBuYW1lIGZvciB2YWxpZCBJRCcsICgpID0+IHtcbiAgICAgIGV4cGVjdChnZXRDYXRlZ29yeU5hbWUoMTcyMjgyKSkudG9CZSgnRWxlY3Ryb25pY3MnKTtcbiAgICAgIGV4cGVjdChnZXRDYXRlZ29yeU5hbWUoMjgzMTU1KSkudG9CZSgnQm9va3MnKTtcbiAgICAgIGV4cGVjdChnZXRDYXRlZ29yeU5hbWUoMTYzMTAwOTEpKS50b0JlKCdJbmR1c3RyaWFsICYgU2NpZW50aWZpYycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdW5kZWZpbmVkIGZvciBpbnZhbGlkIGNhdGVnb3J5IElEJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KGdldENhdGVnb3J5TmFtZSg5OTk5OTk5OTkpKS50b0JlVW5kZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZ2V0Q2F0ZWdvcnlOYW1lKC0xKSkudG9CZVVuZGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGdldENhdGVnb3J5TmFtZSgwKSkudG9CZVVuZGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZWRnZSBjYXNlcycsICgpID0+IHtcbiAgICAgIGV4cGVjdChnZXRDYXRlZ29yeU5hbWUobnVsbCBhcyBhbnkpKS50b0JlVW5kZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZ2V0Q2F0ZWdvcnlOYW1lKHVuZGVmaW5lZCBhcyBhbnkpKS50b0JlVW5kZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZ2V0Q2F0ZWdvcnlOYW1lKCdzdHJpbmcnIGFzIGFueSkpLnRvQmVVbmRlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NhdGVnb3J5IFZhbGlkYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYXZlIGNvbnNpc3RlbnQgY2F0ZWdvcnkgbWFwcGluZ3MnLCAoKSA9PiB7XG4gICAgICAvLyBUZXN0IHRoYXQgZm9yd2FyZCBhbmQgcmV2ZXJzZSBsb29rdXBzIGFyZSBjb25zaXN0ZW50XG4gICAgICBPYmplY3QuZW50cmllcyhWRVJJRklFRF9BTUFaT05fQ0FURUdPUklFUykuZm9yRWFjaCgoW25hbWUsIGlkXSkgPT4ge1xuICAgICAgICBleHBlY3QoZ2V0Q2F0ZWdvcnlOYW1lKGlkKSkudG9CZShuYW1lKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBub3QgaGF2ZSBkdXBsaWNhdGUgY2F0ZWdvcnkgSURzJywgKCkgPT4ge1xuICAgICAgY29uc3QgY2F0ZWdvcnlJZHMgPSBPYmplY3QudmFsdWVzKFZFUklGSUVEX0FNQVpPTl9DQVRFR09SSUVTKTtcbiAgICAgIGNvbnN0IHVuaXF1ZUlkcyA9IG5ldyBTZXQoY2F0ZWdvcnlJZHMpO1xuICAgICAgXG4gICAgICBleHBlY3QodW5pcXVlSWRzLnNpemUpLnRvQmUoY2F0ZWdvcnlJZHMubGVuZ3RoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGF2ZSByZWFzb25hYmxlIGNhdGVnb3J5IElEIHJhbmdlcycsICgpID0+IHtcbiAgICAgIC8vIEFtYXpvbiBjYXRlZ29yeSBJRHMgc2hvdWxkIGJlIHBvc2l0aXZlIGludGVnZXJzXG4gICAgICBPYmplY3QudmFsdWVzKFZFUklGSUVEX0FNQVpPTl9DQVRFR09SSUVTKS5mb3JFYWNoKGNhdGVnb3J5SWQgPT4ge1xuICAgICAgICBleHBlY3QoTnVtYmVyLmlzSW50ZWdlcihjYXRlZ29yeUlkKSkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGNhdGVnb3J5SWQpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgICAgZXhwZWN0KGNhdGVnb3J5SWQpLnRvQmVMZXNzVGhhbig5OTk5OTk5OTk5OSk7IC8vIFJlYXNvbmFibGUgdXBwZXIgYm91bmRcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdfQ==